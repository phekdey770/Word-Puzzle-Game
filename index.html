<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Puzzle Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
            --danger: #ef233c;
            --gray: #adb5bd;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            color: var(--dark);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 10;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 700;
        }

        .logo i {
            font-size: 28px;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: white;
            color: var(--primary);
        }

        .btn-primary:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }

        .btn-outline {
            background-color: transparent;
            color: white;
            border: 1px solid white;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Intro Screen */
        .intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: all 0.5s ease;
            padding: 20px;
            text-align: center;
        }

        .intro-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .intro-title {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .intro-description {
            font-size: 1.2rem;
            max-width: 600px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .start-btn {
            padding: 12px 30px;
            font-size: 1.2rem;
            background-color: white;
            color: var(--primary);
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Main Game Area */
        .game-container {
            display: none;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .game-container.active {
            display: block;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .game-info {
            display: flex;
            gap: 20px;
        }

        .info-box {
            background-color: var(--light);
            padding: 10px 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .level-badge {
            background-color: var(--accent);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .level-badge.easy {
            background-color: #4caf50;
        }

        .level-badge.medium {
            background-color: #ff9800;
        }

        .level-badge.hard {
            background-color: #f44336;
        }

        .level-badge.expert {
            background-color: #9c27b0;
        }

        .word-display {
            background-color: var(--light);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        .scrambled-word {
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: 5px;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .hint-text {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .game-input {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .answer-input {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--gray);
            border-radius: 10px;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .answer-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-accent {
            background-color: var(--accent);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Game Feedback */
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            display: none;
        }

        .feedback.success {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success);
            display: block;
        }

        .feedback.error {
            background-color: rgba(239, 35, 60, 0.2);
            color: var(--danger);
            display: block;
        }

        /* Help Section */
        .help-section {
            margin-top: 30px;
            background-color: var(--light);
            padding: 20px;
            border-radius: 12px;
            display: none;
        }

        .help-section.active {
            display: block;
        }

        .help-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .help-content {
            line-height: 1.6;
        }

        /* Settings Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: white;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .settings-option {
            margin-bottom: 20px;
        }

        .settings-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .settings-select, .settings-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--gray);
            border-radius: 8px;
            font-family: inherit;
        }

        .settings-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        /* Leaderboard */
        .leaderboard {
            margin-top: 40px;
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
            display: none;
        }

        .leaderboard.active {
            display: block;
        }

        .leaderboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .leaderboard-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table th, .leaderboard-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--light);
        }

        .leaderboard-table th {
            background-color: var(--light);
            font-weight: 600;
        }

        .leaderboard-table tr:hover {
            background-color: rgba(67, 97, 238, 0.05);
        }

        .rank {
            font-weight: 700;
            color: var(--primary);
        }

        .player-name {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .game-header, .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .game-info {
                width: 100%;
                justify-content: space-between;
            }

            .input-group {
                flex-direction: column;
            }

            .action-buttons {
                justify-content: center;
            }

            .intro-title {
                font-size: 2rem;
            }

            .scrambled-word {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-scroll"></i>
                <span>Word Puzzle Adventure</span>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-outline" id="helpBtn">
                    <i class="fas fa-question-circle"></i> Help
                </button>
                <button class="btn btn-outline" id="leaderboardBtn">
                    <i class="fas fa-trophy"></i> Leaderboard
                </button>
                <button class="btn btn-primary" id="settingsBtn">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Intro Screen -->
        <div class="intro-screen" id="introScreen">
            <h1 class="intro-title">Word Puzzle Adventure</h1>
            <p class="intro-description">
                Unscramble letters to form meaningful words! Test your vocabulary skills 
                and climb the leaderboard as you progress through increasingly 
                challenging levels. Earn badges and compete with friends!
            </p>
            <button class="start-btn" id="startBtn">
                Start Game <i class="fas fa-play"></i>
            </button>
        </div>

        <!-- Main Game Area -->
        <div class="game-container" id="gameContainer">
            <div class="game-header">
                <div class="game-info">
                    <div class="info-box">
                        <i class="fas fa-star"></i>
                        <span id="scoreDisplay">0</span> Points
                    </div>
                    <div class="info-box">
                        <i class="fas fa-clock"></i>
                        <span id="timerDisplay">00:00</span>
                    </div>
                    <div class="info-box">
                        <i class="fas fa-fire"></i>
                        Streak: <span id="streakDisplay">0</span>
                    </div>
                </div>
                <div class="level-badge easy" id="levelBadge">Easy</div>
            </div>

            <div class="word-display">
                <div class="scrambled-word" id="scrambledWord">LOADING...</div>
                <div class="hint-text" id="hintText">Hint: </div>
            </div>

            <div class="game-input">
                <div class="input-group">
                    <input type="text" class="answer-input" id="answerInput" placeholder="Type your answer here...">
                    <button class="btn btn-success" id="submitBtn">
                        <i class="fas fa-check"></i> Submit
                    </button>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-warning" id="hintBtn">
                        <i class="fas fa-lightbulb"></i> Hint (7 left)
                    </button>
                    <button class="btn btn-danger" id="skipBtn">
                        <i class="fas fa-forward"></i> Skip
                    </button>
                    <button class="btn btn-accent" id="shuffleBtn">
                        <i class="fas fa-random"></i> Shuffle
                    </button>
                </div>
            </div>

            <div class="feedback" id="feedback"></div>

            <div class="help-section" id="helpSection">
                <h3 class="help-title"><i class="fas fa-info-circle"></i> How to Play</h3>
                <div class="help-content">
                    <p><strong>Objective:</strong> Unscramble the letters to form a valid word.</p>
                    <p><strong>Gameplay:</strong></p>
                    <ul>
                        <li>Type your answer in the input field and click Submit</li>
                        <li>Use the Shuffle button to rearrange the letters</li>
                        <li>Get hints when you're stuck (limited uses)</li>
                        <li>Skip a word if it's too challenging</li>
                    </ul>
                    <p><strong>Scoring:</strong></p>
                    <ul>
                        <li>+10 points for correct answer</li>
                        <li>+5 bonus points for quick answers</li>
                        <li>Multiplier for consecutive correct answers</li>
                    </ul>
                    <p>Progress through levels (Easy, Medium, Hard, Expert) as you earn more points!</p>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard" id="leaderboard">
            <div class="leaderboard-header">
                <h2 class="leaderboard-title"><i class="fas fa-trophy"></i> Leaderboard</h2>
                <button class="btn btn-primary" id="backToGameBtn">
                    <i class="fas fa-arrow-left"></i> Back to Game
                </button>
            </div>
            <table class="leaderboard-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Player</th>
                        <th>Score</th>
                        <th>Level</th>
                        <th>Time Played</th>
                    </tr>
                </thead>
                <tbody id="leaderboardBody">
                    <!-- Filled by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-cog"></i> Game Settings</h3>
                <button class="close-btn" id="closeSettingsBtn">&times;</button>
            </div>
            <div class="settings-option">
                <label class="settings-label">Difficulty Level</label>
                <select class="settings-select" id="difficultySelect">
                    <option value="easy">Easy (4-5 letters)</option>
                    <option value="medium">Medium (6-7 letters)</option>
                    <option value="hard">Hard (8-9 letters)</option>
                    <option value="expert">Expert (10+ letters)</option>
                </select>
            </div>
            <div class="settings-option">
                <label class="settings-label">Player Name</label>
                <input type="text" class="settings-input" id="playerNameInput" placeholder="Enter your name">
            </div>
            <div class="settings-option">
                <label class="settings-label">Timer</label>
                <select class="settings-select" id="timerSelect">
                    <option value="30">30 seconds per word</option>
                    <option value="45">45 seconds per word</option>
                    <option value="60" selected>60 seconds per word</option>
                    <option value="0">No timer</option>
                </select>
            </div>
            <div class="settings-actions">
                <button class="btn btn-outline" id="cancelSettingsBtn">Cancel</button>
                <button class="btn btn-primary" id="saveSettingsBtn">Save</button>
            </div>
        </div>
    </div>

    <script>
        // Game Data
        const wordsByDifficulty = {
            easy: [
                { word: "apple", hint: "A common fruit, often red or green" },
                { word: "table", hint: "Furniture with a flat top and legs" },
                { word: "happy", hint: "Feeling of joy or pleasure" },
                { word: "water", hint: "Essential liquid for life" },
                { word: "music", hint: "Art form combining sound and rhythm" },
                { word: "light", hint: "Makes things visible" },
                { word: "house", hint: "Place where people live" },
                { word: "earth", hint: "Our planet" },
                { word: "smile", hint: "Facial expression showing happiness" },
                { word: "cloud", hint: "White or gray mass in the sky" }
            ],
            medium: [
                { word: "banana", hint: "Long curved yellow fruit" },
                { word: "garden", hint: "Area for growing plants and flowers" },
                { word: "puzzle", hint: "Game or problem to solve" },
                { word: "sunset", hint: "Daily disappearance of the sun" },
                { word: "whisper", hint: "To speak very softly" },
                { word: "journey", hint: "Act of traveling from one place to another" },
                { word: "harmony", hint: "Pleasing combination of musical notes" },
                { word: "victory", hint: "Achievement of mastery or success" },
                { word: "library", hint: "Place containing collections of books" },
                { word: "breathe", hint: "Process of inhaling and exhaling" }
            ],
            hard: [
                { word: "adventure", hint: "Exciting or remarkable experience" },
                { word: "beautiful", hint: "Pleasing the senses or mind aesthetically" },
                { word: "chocolate", hint: "Sweet brown food made from cacao seeds" },
                { word: "discovery", hint: "Act of finding or learning something new" },
                { word: "education", hint: "Process of receiving systematic instruction" },
                { word: "friendship", hint: "Relationships between friends" },
                { word: "happiness", hint: "State of being happy" },
                { word: "important", hint: "Of great significance or value" },
                { word: "knowledge", hint: "Facts, information, and skills acquired" },
                { word: "mysterious", hint: "Difficult or impossible to understand" }
            ],
            expert: [
                { word: "extravaganza", hint: "Elaborate and spectacular entertainment" },
                { word: "quintessential", hint: "Representing the most perfect example" },
                { word: "unpredictable", hint: "Not able to be predicted" },
                { word: "xylophonist", hint: "Person who plays the xylophone" },
                { word: "breathtaking", hint: "Astonishing or awe-inspiring" },
                { word: "connoisseur", hint: "Expert judge in matters of taste" },
                { word: "kaleidoscope", hint: "Optical instrument with mirrors" },
                { word: "labyrinthine", hint: "Complicated and confusing" },
                { word: "magnificent", hint: "Extremely beautiful and impressive" },
                { word: "nevertheless", hint: "In spite of that; notwithstanding" }
            ]
        };

        // Game State
        let gameState = {
            score: 0,
            streak: 0,
            timer: 60,
            timeLeft: 60,
            timerInterval: null,
            hintsLeft: 7,
            currentWord: null,
            currentDifficulty: 'easy',
            gameStarted: false,
            playerName: 'Player',
            leaderboard: JSON.parse(localStorage.getItem('wordPuzzleLeaderboard')) || []
        };

        // DOM Elements
        const elements = {
            introScreen: document.getElementById('introScreen'),
            gameContainer: document.getElementById('gameContainer'),
            leaderboard: document.getElementById('leaderboard'),
            leaderboardBody: document.getElementById('leaderboardBody'),
            scrambledWord: document.getElementById('scrambledWord'),
            hintText: document.getElementById('hintText'),
            answerInput: document.getElementById('answerInput'),
            scoreDisplay: document.getElementById('scoreDisplay'),
            timerDisplay: document.getElementById('timerDisplay'),
            streakDisplay: document.getElementById('streakDisplay'),
            levelBadge: document.getElementById('levelBadge'),
            feedback: document.getElementById('feedback'),
            helpSection: document.getElementById('helpSection'),
            startBtn: document.getElementById('startBtn'),
            submitBtn: document.getElementById('submitBtn'),
            hintBtn: document.getElementById('hintBtn'),
            skipBtn: document.getElementById('skipBtn'),
            shuffleBtn: document.getElementById('shuffleBtn'),
            helpBtn: document.getElementById('helpBtn'),
            leaderboardBtn: document.getElementById('leaderboardBtn'),
            backToGameBtn: document.getElementById('backToGameBtn'),
            settingsBtn: document.getElementById('settingsBtn'),
            settingsModal: document.getElementById('settingsModal'),
            closeSettingsBtn: document.getElementById('closeSettingsBtn'),
            cancelSettingsBtn: document.getElementById('cancelSettingsBtn'),
            saveSettingsBtn: document.getElementById('saveSettingsBtn'),
            difficultySelect: document.getElementById('difficultySelect'),
            playerNameInput: document.getElementById('playerNameInput'),
            timerSelect: document.getElementById('timerSelect')
        };

        // Event Listeners
        elements.startBtn.addEventListener('click', startGame);
        elements.submitBtn.addEventListener('click', checkAnswer);
        elements.hintBtn.addEventListener('click', showHint);
        elements.skipBtn.addEventListener('click', nextWord);
        elements.shuffleBtn.addEventListener('click', shuffleLetters);
        elements.helpBtn.addEventListener('click', toggleHelp);
        elements.leaderboardBtn.addEventListener('click', showLeaderboard);
        elements.backToGameBtn.addEventListener('click', backToGame);
        elements.settingsBtn.addEventListener('click', openSettings);
        elements.closeSettingsBtn.addEventListener('click', closeSettings);
        elements.cancelSettingsBtn.addEventListener('click', closeSettings);
        elements.saveSettingsBtn.addEventListener('click', saveSettings);
        elements.answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkAnswer();
        });

        // Initialize
        function init() {
            updateLeaderboard();
            elements.playerNameInput.value = gameState.playerName;
            elements.timerSelect.value = gameState.timer;
            elements.difficultySelect.value = gameState.currentDifficulty;
        }

        // Game Functions
        function startGame() {
            elements.introScreen.classList.add('hidden');
            elements.gameContainer.classList.add('active');
            gameState.gameStarted = true;
            nextWord();
            startTimer();
        }

        function getRandomWord(difficulty) {
            const words = wordsByDifficulty[difficulty];
            return words[Math.floor(Math.random() * words.length)];
        }

        function scrambleWord(word) {
            let letters = word.split('');
            for (let i = letters.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [letters[i], letters[j]] = [letters[j], letters[i]];
            }
            return letters.join('');
        }

        function nextWord() {
            // Update difficulty based on score
            if (gameState.score >= 300) {
                gameState.currentDifficulty = 'expert';
                elements.levelBadge.className = 'level-badge expert';
                elements.levelBadge.textContent = 'Expert';
            } else if (gameState.score >= 150) {
                gameState.currentDifficulty = 'hard';
                elements.levelBadge.className = 'level-badge hard';
                elements.levelBadge.textContent = 'Hard';
            } else if (gameState.score >= 50) {
                gameState.currentDifficulty = 'medium';
                elements.levelBadge.className = 'level-badge medium';
                elements.levelBadge.textContent = 'Medium';
            } else {
                gameState.currentDifficulty = 'easy';
                elements.levelBadge.className = 'level-badge easy';
                elements.levelBadge.textContent = 'Easy';
            }

            gameState.currentWord = getRandomWord(gameState.currentDifficulty);
            const scrambled = scrambleWord(gameState.currentWord.word);
            elements.scrambledWord.textContent = scrambled;
            elements.hintText.textContent = `Hint: ${gameState.currentWord.hint}`;
            elements.hintText.style.display = 'none';
            elements.answerInput.value = '';
            elements.answerInput.focus();
            elements.feedback.style.display = 'none';
            
            // Reset timer
            resetTimer();
        }

        function checkAnswer() {
            const userAnswer = elements.answerInput.value.trim().toLowerCase();
            
            if (!userAnswer) {
                showFeedback('Please enter an answer!', false);
                return;
            }

            if (userAnswer === gameState.currentWord.word) {
                // Correct answer
                const timeBonus = Math.floor(gameState.timeLeft / 10);
                const streakBonus = gameState.streak * 2;
                const pointsEarned = 10 + timeBonus + streakBonus;
                
                gameState.score += pointsEarned;
                gameState.streak++;
                
                updateScoreDisplay();
                showFeedback(`Correct! +${pointsEarned} points (Word: ${gameState.currentWord.word})`, true);
                
                setTimeout(() => {
                    nextWord();
                }, 1500);
            } else {
                // Incorrect answer
                gameState.streak = 0;
                updateScoreDisplay();
                showFeedback(`Incorrect! Try again.`, false);
            }
        }

        function showHint() {
            if (gameState.hintsLeft <= 0) {
                showFeedback('No hints left!', false);
                return;
            }
            
            gameState.hintsLeft--;
            elements.hintBtn.textContent = `Hint (${gameState.hintsLeft} left)`;
            elements.hintText.style.display = 'block';
            
            // Disable hint button if no hints left
            if (gameState.hintsLeft <= 0) {
                elements.hintBtn.disabled = true;
            }
        }

        function shuffleLetters() {
            const currentScrambled = elements.scrambledWord.textContent;
            const rescrambled = scrambleWord(currentScrambled);
            elements.scrambledWord.textContent = rescrambled;
        }

        function updateScoreDisplay() {
            elements.scoreDisplay.textContent = gameState.score;
            elements.streakDisplay.textContent = gameState.streak;
        }

        function showFeedback(message, isSuccess) {
            elements.feedback.textContent = message;
            elements.feedback.className = 'feedback ' + (isSuccess ? 'success' : 'error');
            elements.feedback.style.display = 'block';
        }

        // Timer Functions
        function startTimer() {
            if (gameState.timerInterval) clearInterval(gameState.timerInterval);
            
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    showFeedback('Time\'s up! The word was: ' + gameState.currentWord.word, false);
                    gameState.streak = 0;
                    updateScoreDisplay();
                    
                    setTimeout(() => {
                        nextWord();
                    }, 2000);
                }
            }, 1000);
        }

        function resetTimer() {
            gameState.timeLeft = gameState.timer;
            updateTimerDisplay();
            
            if (gameState.timer > 0) {
                if (gameState.timerInterval) clearInterval(gameState.timerInterval);
                startTimer();
            }
        }

        function updateTimerDisplay() {
            if (gameState.timer <= 0) {
                elements.timerDisplay.textContent = '--:--';
                return;
            }
            
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            elements.timerDisplay.textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // UI Functions
        function toggleHelp() {
            elements.helpSection.classList.toggle('active');
        }

        function showLeaderboard() {
            elements.gameContainer.classList.remove('active');
            elements.leaderboard.classList.add('active');
            updateLeaderboard();
        }

        function backToGame() {
            elements.leaderboard.classList.remove('active');
            elements.gameContainer.classList.add('active');
        }

        function updateLeaderboard() {
            // Add current player to leaderboard if game has started
            if (gameState.gameStarted && gameState.score > 0) {
                const existingPlayerIndex = gameState.leaderboard.findIndex(
                    player => player.name === gameState.playerName
                );
                
                const playerData = {
                    name: gameState.playerName,
                    score: gameState.score,
                    level: gameState.currentDifficulty,
                    timePlayed: new Date().toLocaleString()
                };
                
                if (existingPlayerIndex >= 0) {
                    // Update existing player if current score is higher
                    if (gameState.score > gameState.leaderboard[existingPlayerIndex].score) {
                        gameState.leaderboard[existingPlayerIndex] = playerData;
                    }
                } else {
                    gameState.leaderboard.push(playerData);
                }
                
                // Sort leaderboard by score (descending)
                gameState.leaderboard.sort((a, b) => b.score - a.score);
                
                // Keep only top 10 players
                if (gameState.leaderboard.length > 10) {
                    gameState.leaderboard = gameState.leaderboard.slice(0, 10);
                }
                
                // Save to localStorage
                localStorage.setItem('wordPuzzleLeaderboard', JSON.stringify(gameState.leaderboard));
            }
            
            // Update leaderboard display
            elements.leaderboardBody.innerHTML = '';
            gameState.leaderboard.forEach((player, index) => {
                const row = document.createElement('tr');
                
                // Determine badge based on level
                let badgeClass = 'level-badge easy';
                let levelText = 'Easy';
                
                if (player.level === 'medium') {
                    badgeClass = 'level-badge medium';
                    levelText = 'Medium';
                } else if (player.level === 'hard') {
                    badgeClass = 'level-badge hard';
                    levelText = 'Hard';
                } else if (player.level === 'expert') {
                    badgeClass = 'level-badge expert';
                    levelText = 'Expert';
                }
                
                row.innerHTML = `
                    <td class="rank">${index + 1}</td>
                    <td>
                        <div class="player-name">
                            <div class="player-avatar">${player.name.charAt(0).toUpperCase()}</div>
                            ${player.name}
                        </div>
                    </td>
                    <td>${player.score}</td>
                    <td><span class="${badgeClass}">${levelText}</span></td>
                    <td>${player.timePlayed}</td>
                `;
                
                elements.leaderboardBody.appendChild(row);
            });
        }

        // Settings Functions
        function openSettings() {
            elements.settingsModal.classList.add('active');
        }

        function closeSettings() {
            elements.settingsModal.classList.remove('active');
        }

        function saveSettings() {
            gameState.playerName = elements.playerNameInput.value || 'Player';
            gameState.timer = parseInt(elements.timerSelect.value);
            gameState.currentDifficulty = elements.difficultySelect.value;
            
            // Reset timer if game is in progress
            if (gameState.gameStarted) {
                resetTimer();
            }
            
            closeSettings();
        }

        // Initialize the game
        init();
    </script>
</body>
</html>
